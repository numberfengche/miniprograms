<!--pages/sample/form.wxml-->
<wxs src="/utils/util.wxs" module="util" />

<view class="container">

    <view class="title">
        <view class="block"></view>
        <view class="ttext">商品信息</view>
    </view>

    <view class="pcard">
        <view class="pcard-img" wx:if="{{product.image_url != undefined}}">
            <image class="img" src="{{product.image_url}}"></image>
        </view>
        <view class="pcard-content" wx:if="{{product.image_url != undefined}}">
            <view class="pcard-title">{{product.title}}</view>
            <view class="pcard-prices">
                <view class="price-group">
                    <view class="price">
                        <view class="symbol">￥</view>
                        {{product.price}}
                    </view>
                    <view class="label">带货价</view>
                </view>
                <view class="commission">
                    <view class="number">{{product.cos_ratio}}%</view>
                    <view class="ctext">佣金</view>
                </view>
            </view>
            <view class="shop">
                <view class="dicon">
                    <image src="/assets/images/icon-dou@2x.png" />
                </view>
                {{product.shop_name}}
            </view>
        </view>
    </view>

    <view class="address">
        <view class="btitle">收货地址信息</view>
        <view class="atips">使用智能识别，快速填写地址</view>
        <textarea placeholder="请粘贴文本或输入，点击识别，自动识别姓名电话和地址" class="textarea" bindinput="addrTextChange" placeholder-class="placeholder-style" value="{{addrText}}"/>

        <button class="recognize" plain="{{true}}" bindtap="addressAnalysis">识别</button>
    </view>

    <view class="inputrow">
        <view class="label">收货人</view>
        <view class="inp">
            <input class="input-box" placeholder="请输入收货人姓名" bindinput="receiverChange" placeholder-class="placeholder-style" value="{{receiver}}" />
        </view>
    </view>
    <view class="inputrow">
        <view class="label">手机号</view>
        <view class="inp">
            <input class="input-box" placeholder="请输入手机号" bindinput="mobileChange" placeholder-class="placeholder-style" value="{{mobile}}" />
        </view>
    </view>
    <view class="inputrow">
        <view class="label">地区</view>
        <view class="inp">
            <picker mode="region" value="{{regionNames}}" bindchange="onRegion">
                <view class="regionbox">
                    <view class="placeholder" wx:if="{{regionNames.length==0}}"> 请输入省市区 </view>
                    <view class="val" wx:if="{{regionNames.length!=0}}"> {{util.formatRegion(regionNames)}} </view>
                    <view class="icon">
                        <image src="/assets/images/icon-Arrowhead@2x.png" />
                    </view>
                </view>
            </picker>
        </view>
    </view>
    <view class="inputrow">
        <view class="label">详细地址</view>
        <view class="inp">
            <textarea placeholder="请输入详细地址" class="rowtextarea" bindinput="detialChange" placeholder-class="placeholder-style" value="{{detail}}"/>
        </view>
    </view>

    <view class="more-trigger" bindtap="shiftExpand">
        <view class="mbox">
            <view>更多合作信息(可选)</view>
            <view>
                <image src="/assets/images/icon-Arrowhead@2x.png" wx:if="{{expanded==false}}" />
                <image src="/assets/images/icon-arrowmore@2x.png" wx:if="{{expanded==true}}" />
            </view>
        </view>
    </view>


    <view class="more" wx:if="{{expanded==true}}">

        <view class="coop">
            <view class="btitle">合作信息</view>
        </view>

        <view class="inputrow">
            <view class="label">带货方式:</view>
            <view class="inp short radios">
                <mradio checked="{{mode==1}}" label="直播" bindtap="setMode" data-id="1" />
                <mradio checked="{{mode==2}}" label="短视频" bindtap="setMode" data-id="2" />
                <mradio checked="{{mode==3}}" label="不限" tip="(请备注)" bindtap="setMode" data-id="3" />
            </view>
        </view>

        <view class="inputrow">
            <view class="label">计划合作时间:</view>
            <view class="inp short radios">
                <picker mode="date" value="{{stime}}" start="2015-09-01" bindchange="onStime">
                    <view class="datebox">
                        <view class="placeholder" wx:if="{{stime==''}}"> 开始时间 </view>
                        <view class="val" wx:if="{{stime!=''}}"> {{stime}} </view>
                        <view class="icon">
                            <image src="/assets/images/Frame@2x.png" wx:if="{{stime==''}}" />
                        </view>
                    </view>
                </picker>
                <view class="divider">至</view>
                <picker mode="date" value="{{etime}}" start="2015-09-01" bindchange="onEtime">
                    <view class="datebox">
                        <view class="placeholder" wx:if="{{etime==''}}"> 结束时间 </view>
                        <view class="val" wx:if="{{etime!=''}}"> {{etime}} </view>
                        <view class="icon">
                            <image src="/assets/images/Frame@2x.png" wx:if="{{etime==''}}" />
                        </view>
                    </view>
                </picker>
            </view>
        </view>

        <view class="inputrow">
            <view class="label">备注：</view>
            <view class="inp short">
                <textarea placeholder="备注" class="rowtextarea" bindinput="addrTextChange" placeholder-class="placeholder-style" />
            </view>
        </view>
    </view>

    <view style="height:200rpx"></view>
</view>


<view class="bottom">
    <button class="view-btn" bindtap="savedata">
         申请样品
    </button>
</view>


<van-popup custom-class="poptip" custom-style="width:calc(100% - 132rpx);border-radius: 24rpx;z-index:1000;" show="{{ showRes }}" bind:close="onClosePop">
    <view class="popbox">
        <view class="ptitle">提交成功</view>
        <view class="pcontent">工作人员将尽快处理您的请求，请耐心等待。你可前往 <text class="emphasis">我的合作</text> 中查看申请记录，如有疑问，请联系推荐人。</view>
        <button class="pbtn" bindtap="onOverPop">我知道了</button>
    </view>
</van-popup>